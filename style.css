/* ===== Design tokens (HSL so we can tweak opacity cleanly) ===== */
:root {
  color-scheme: light;
  --bg: hsl(210 40% 98%);
  --card: hsl(0 0% 100%);
  --text: hsl(222 47% 11%);
  --muted: hsl(220 9% 46%);
  --value: hsl(199 89% 48%);   /* blue */
  --accent: hsl(160 84% 39%);  /* green */
  --border: hsl(220 14% 90%);
  --ring: hsl(199 89% 48% / .25);
  --shadow: 0 10px 25px hsl(220 40% 2% / .08), 0 1px 0 hsl(220 20% 75% / .25) inset;

  --radius: 14px;
  --radius-lg: 16px;

  --font: 400 16px/1.55 "Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  --fs-12: clamp(11px, 1.2vw, 12px);
  --fs-14: clamp(12px, 1.4vw, 14px);
  --fs-16: clamp(14px, 1.6vw, 16px);
  --fs-22: clamp(18px, 3vw, 22px);
  --fs-28: clamp(20px, 4vw, 28px);
}

/* Dark theme: auto + manual override via body.dark */
@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
    --bg: hsl(223 35% 6%);
    --card: hsl(222 44% 10%);
    --text: hsl(210 40% 96%);
    --muted: hsl(215 12% 65%);
    --value: hsl(213 94% 68%);
    --accent: hsl(160 84% 44%);
    --border: hsl(217 25% 18%);
    --ring: hsl(213 94% 68% / .25);
    --shadow: 0 10px 25px hsl(210 45% 2% / .45);
  }
}
body.dark {
  --bg: hsl(223 35% 6%);
  --card: hsl(222 44% 10%);
  --text: hsl(210 40% 96%);
  --muted: hsl(215 12% 65%);
  --value: hsl(213 94% 68%);
  --accent: hsl(160 84% 44%);
  --border: hsl(217 25% 18%);
  --ring: hsl(213 94% 68% / .25);
  --shadow: 0 10px 25px hsl(210 45% 2% / .45);
}

/* ===== Base / reset ===== */
*,
*::before,
*::after { box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: var(--font);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
img, canvas { max-width: 100%; height: auto; }
button { font: inherit; }
a { color: inherit; text-decoration: none; }
:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
  border-radius: calc(var(--radius) - 4px);
}

/* ===== Layout ===== */
.container { max-width: 1100px; margin: 24px auto; padding: 0 16px; }

/* Header / top bar */
.header {
  display: flex; align-items: center; justify-content: space-between; gap: 12px;
  padding: 12px 16px; background: var(--card); border-radius: var(--radius);
  box-shadow: var(--shadow); position: sticky; top: 12px; z-index: 50;
  border: 1px solid var(--border); backdrop-filter: saturate(140%) blur(6px);
}
.header .left { display: flex; align-items: center; gap: 10px; }
.brand { font-weight: 700; letter-spacing: .2px; }
.theme-toggle { display: flex; align-items: center; gap: 10px; color: var(--muted); font-weight: 600; }

.header-block h1 { margin: 8px 0 2px; font-size: var(--fs-28); font-weight: 700; letter-spacing: .2px; }
.meta { display: flex; align-items: center; gap: 14px; flex-wrap: wrap; color: var(--muted); font-size: var(--fs-14); }

/* Status */
.status { display: flex; align-items: center; gap: 8px; }
.status .dot {
  width: 10px; height: 10px; border-radius: 50%;
  background: #ef4444; display: inline-block;
  box-shadow: 0 0 0 0 hsl(0 100% 50% / 0);
  transition: transform .2s ease;
}
.status .online { background: var(--accent) !important; animation: pulse 2s ease-out infinite; }
.status .offline { background: #ef4444 !important; }
@keyframes pulse {
  0% { box-shadow: 0 0 0 0 var(--ring); }
  70% { box-shadow: 0 0 0 8px transparent; }
  100% { box-shadow: 0 0 0 0 transparent; }
}

/* Metrics grid */
.metrics-grid {
  display: grid; grid-template-columns: repeat(5, minmax(0,1fr));
  gap: 12px; margin-top: 16px;
}
.metric {
  background: var(--card); border: 1px solid var(--border);
  border-radius: var(--radius); box-shadow: var(--shadow);
  padding: 14px; display: flex; flex-direction: column; gap: 6px;
  transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease;
}
.metric:hover { transform: translateY(-1px); box-shadow: 0 12px 28px hsl(220 40% 2% / .12), 0 1px 0 hsl(220 20% 75% / .2) inset; }
.metric .label { color: var(--muted); font-size: var(--fs-12); }
.metric .value {
  font-weight: 700; font-size: var(--fs-22);
  display: flex; align-items: baseline; gap: 6px; letter-spacing: .2px;
}
.metric .unit { font-weight: 600; color: var(--muted); font-size: var(--fs-12); }
.trend { margin-left: auto; font-size: var(--fs-14); }
.trend.up { color: hsl(142 72% 39%); }
.trend.down { color: hsl(0 84% 60%); }
.trend.steady { color: var(--muted); }

/* Charts / cards */
.charts-grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 16px; margin-top: 18px; }
.card {
  background: var(--card); border: 1px solid var(--border);
  border-radius: var(--radius-lg); box-shadow: var(--shadow); padding: 14px;
  display: flex; flex-direction: column; gap: 10px; min-height: 280px;
}
.chart-card .chart-title { color: var(--muted); font-size: var(--fs-12); }
.chart-card.wide { grid-column: 1 / -1; }

/* Toggle switch */
.switch { position: relative; width: 52px; height: 28px; background: hsl(216 12% 84%); border-radius: 999px; cursor: pointer; }
.switch input { display: none; }
.switch .thumb {
  position: absolute; top: 3px; left: 3px; width: 22px; height: 22px; border-radius: 50%;
  background: #fff; transition: left .2s ease, background .2s ease, box-shadow .2s ease;
  box-shadow: 0 4px 10px hsl(0 0% 0% / .15);
}
.switch input:checked + .thumb { left: 27px; background: var(--accent); }

/* Drawer */
.drawer-overlay { position: fixed; inset: 0; background: hsl(0 0% 0% / .35); display: none; z-index: 80; }
.drawer { position: fixed; top: 0; left: -280px; width: 260px; height: 100vh; background: var(--card); z-index: 90;
  border-right: 1px solid var(--border); box-shadow: var(--shadow); transition: left .25s ease; padding: 16px; }
.drawer.open { left: 0; }
.drawer-overlay.show { display: block; }
.nav-list { list-style: none; margin: 0; padding: 0; }
.nav-list li a { display: block; padding: 10px 8px; border-radius: 10px; color: var(--text); }
.nav-list li a:hover { background: hsl(0 0% 0% / .06); }
body.dark .nav-list li a:hover { background: hsl(0 0% 100% / .08); }

/* Header bar (secondary) */
.headerbar {
  display: flex; align-items: center; justify-content: space-between; gap: 12px;
  background: var(--card); color: var(--text); padding: 10px 14px; border-radius: var(--radius);
  box-shadow: var(--shadow); border: 1px solid var(--border);
}
.icon-btn {
  display: grid; place-items: center; width: 36px; height: 36px; border-radius: 10px;
  background: hsl(0 0% 0% / .05); cursor: pointer; user-select: none;
  transition: transform .12s ease, background .2s ease;
}
.icon-btn:hover { transform: translateY(-1px); }
body.dark .icon-btn { background: hsl(0 0% 100% / .06); }

/* Error banner (if injected) */
#errBanner a { color: hsl(0 72% 35%); font-weight: 700; }

/* Scrollbar (WebKit) */
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-thumb { background: hsl(215 15% 65% / .4); border-radius: 999px; }
body.dark *::-webkit-scrollbar-thumb { background: hsl(215 15% 40% / .4); }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* Responsive tweaks */
@media (max-width: 980px) {
  .metrics-grid { grid-template-columns: repeat(3, minmax(0,1fr)); }
  .charts-grid { grid-template-columns: 1fr; }
}
@media (max-width: 600px) {
  .metrics-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
}

/* Little utility: subtle hover lift for clickable cards */
.card[data-clickable="true"]:hover { transform: translateY(-2px); box-shadow: 0 16px 28px hsl(220 40% 2% / .16); }

/* Optional: animated number color for values */
.value span:first-child {
  transition: color .2s ease, text-shadow .2s ease;
}
.value.changed span:first-child {
  color: var(--value);
  text-shadow: 0 0 0 transparent, 0 0 16px hsl(199 89% 48% / .15);
}
